# Migration `20210203150556-votes-on-requests`

This migration has been generated by quentin at 2/3/2021, 4:05:56 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "VotesOnRequests" (
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL,
    "requestId" INTEGER NOT NULL,
    "userId" INTEGER NOT NULL,

    FOREIGN KEY ("requestId") REFERENCES "Request"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    PRIMARY KEY ("requestId","userId")
)
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210107160600-add-product-request-relation..20210203150556-votes-on-requests
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -22,8 +22,9 @@
   role           String    @default("user")
   sessions       Session[]
   products       Product[]
   requests        Request[]
+  votesOnRequests VotesOnRequests[]
 }
 model Session {
   id                 Int       @default(autoincrement()) @id
@@ -50,15 +51,27 @@
   requests    Request[]
 }
 model Request {
-
-  id        Int      @default(autoincrement()) @id
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
-  title String?  
+  id          Int       @default(autoincrement()) @id
+  createdAt   DateTime  @default(now())
+  updatedAt   DateTime  @updatedAt
+  title       String?
   description String?
   product    Product     @relation(fields: [productId], references: [id])
-  productId Int
+  productId   Int
   user        User?     @relation(fields: [userId], references: [id])
   userId      Int?
-}
+ votesOnRequests VotesOnRequests[]
+}
+
+model VotesOnRequests{
+
+  createdAt   DateTime  @default(now())
+  updatedAt   DateTime  @updatedAt
+  request Request  @relation(fields: [requestId],references:[id])
+  requestId Int
+  user  User     @relation(fields: [userId], references: [id])
+  userId      Int
+  
+  @@id([requestId,userId])
+}
```


